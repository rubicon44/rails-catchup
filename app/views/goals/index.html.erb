<%= render 'search_form', search: @search %>

<% if user_signed_in? %>
  <div class="goal-addbutton">
    <%= link_to '目標追加', new_goal_path %>
  </div>
<% end %>

<div>
  <% @goals.each do |goal| %>
    <div class="goal">
      <div class="goal-username">
        @<%= link_to goal.user.username, user_path(goal.user.username) unless goal.user.blank? %>
      </div>

      <div class="goal-title">
        <%= goal.name %>
      </div>

      <div class="goal-content">
        <%= goal.description %>
      </div>

      <% case goal.status %>
      <% when 0 then %>
        <span class="goal-status-not">未対応</span>
      <% when 1 then %>
        <span class="goal-status-process">処理中</span>
      <% when 2 then %>
        <span class="goal-status-processd">処理済み</span>
      <% when 3 then %>
        <span class="goal-status-done">完了</span>
      <% end %>

      <div class="goal-button-cover">
        <div><%= link_to 'Show', goal_path(goal) %></div>
        <% if goal.user == current_user %>
          <div><%= link_to '編集', edit_goal_path(goal) %></div>
          <div><%= link_to '削除', goal_path(goal), method: :delete, data: { confirm: '本当に削除しますか？' } %></div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>