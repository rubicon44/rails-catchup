<h1>プロフィール</h1>

<p><%= image_tag(@user.avatar.url, size: "250x250", alt: "avatar image") %></p>
<p>名前：<%= @user.username %></p>
<p>メールアドレス : <%= @user.email %></p>
<p>自己紹介 : <%= @user.profile %></p>

<% if user_signed_in? %>
  <% if current_user.admin? %>
    <% if @user == current_user %>
    <% else %>
      <%= button_to "このユーザーを削除する", @user, method: :delete, data: {confirm: "このユーザーを削除してもよろしいですか?"} %>
      ※「このユーザーを削除する」ボタンは管理者のみに表示されています。
    <% end %>
  <% end %>
<% end %>

<% if user_signed_in? %>
  <p><%=link_to "フォロー", follows_user_path(@user.id) %>
  <%=link_to "フォロワー", followers_user_path(@user.id) %></p>

  <% @users.each do |user| %>
    <% if current_user != user %>
        <% if user.already_followed?(current_user) %>
            <p><%=button_to "フォロー中", user_relationships_path(user.id), method: :delete %></p>
        <% else %>
            <p><%=button_to "フォローする", user_relationships_path(user.id), method: :goal %></p>
        <% end %>
    <% end %>
  <% end %>
<% end %>

<div>
  <h3>目標：<%= @goals.count %>件</h3>
  <% if @user.goals.any? %>
    <%= render 'show_goals', group: @goals %>
  <% else %>
    <div>投稿がありません</div>
  <% end %>
</div>

<div>
  <h3>いいね：<%= @likes.count %>件</h3>
  <% if @user.likes.any? %>
    <%= render 'show_likes', group: @likes %>
  <% else %>
    <div>"いいね！" した投稿がありません</div>
  <% end %>
</div>

<%= link_to 'Back', goals_path %>